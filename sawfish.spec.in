
Name: sawfish
Version: @version@
Release: 1
Summary: a highly configurable and extensible X11 window manager
Requires: librep >= 0.10, rep-gtk >= 0.8
Copyright: GPL
Group: User Interface/Desktops
Source: ftp://ftp.dcs.warwick.ac.uk/people/John.Harper/sawfish/sawfish-%{version}.tar.gz
URL: http://www.dcs.warwick.ac.uk/~john/sw/sawfish/
Packager: John Harper <john@dcs.warwick.ac.uk>
Buildroot: /var/tmp/%{name}-root
BuildPrereq: rep-gtk-libglade control-center-devel gmp-devel
PreReq: /sbin/install-info
Obsoletes: sawmill

%description
This is an extensible window manager using a LISP-based scripting
language--all window decorations are configurable, the basic idea is to
have as much user-interface policy as possible controlled through the
Lisp language.

All configuration may be performed through a GTK interface; sawfish is
mostly-GNOME compliant.

%package gnome
Summary: GNOME support for sawfish
Group: User Interface/Desktops
Requires: %{name}
Obsoletes: sawmill-gnome

%description gnome
Optional GNOME support for sawfish. Includes a wm-entries spec, and a
control center applet

%package themer
Summary: GUI for creating sawfish themes
Group: User Interface/Desktops
Requires: %{name}, rep-gtk-libglade
Obsoletes: sawmill-themer

%description themer
Optional theme builder for sawfish. Allows static window themes to be
created/edited in a graphical environment.

%prep
%setup

%build
./configure --enable-capplet --enable-themer --with-readline --prefix %{_prefix} %{_host}
make CFLAGS="$RPM_OPT_FLAGS"

%install
rm -rf $RPM_BUILD_ROOT
mkdir -p $RPM_BUILD_ROOT%{_prefix}/share/gnome/wm-properties
mkdir -p $RPM_BUILD_ROOT%{_prefix}/share/control-center
mkdir -p $RPM_BUILD_ROOT%{_prefix}/share/gnome/apps/Settings
mkdir -p $RPM_BUILD_ROOT%{_prefix}/bin
touch $RPM_BUILD_ROOT%{_prefix}/bin/sawmill{,-client,-capplet,-ui,-themer}
chmod +x $RPM_BUILD_ROOT%{_prefix}/bin/sawmill{,-client,-capplet,-ui,-themer}
make DESTDIR=$RPM_BUILD_ROOT install
gzip -9nf $RPM_BUILD_ROOT%{_prefix}/info/sawfish*

%post
/sbin/install-info /usr/info/sawfish.info.gz /usr/info/dir

%preun
if [ "$1" = 0 ]; then
    /sbin/install-info --delete /usr/info/sawfish.info.gz /usr/info/dir
fi

%files
%defattr(-,root,root)
%doc README NEWS FAQ THANKS BUGS TODO po/sawfish.pot
%{_prefix}/bin/sawfish
%{_prefix}/bin/sawfish-client
%{_prefix}/bin/sawfish-ui
%{_prefix}/bin/sawmill
%{_prefix}/bin/sawmill-client
%{_prefix}/bin/sawmill-ui
%{_prefix}/share/sawfish/%{version}
%{_prefix}/libexec/sawfish/%{version}/%{_host}
%{_prefix}/info/sawfish*

%files gnome
%defattr(-,root,root)
%{_prefix}/bin/sawfish-capplet
%{_prefix}/bin/sawmill-capplet
%{_prefix}/share/control-center/Sawfish
%{_prefix}/share/gnome/apps/Settings/Sawfish
%{_prefix}/share/gnome/wm-properties/Sawfish.desktop
%{_prefix}/share/pixmaps/sawfish*.png

%files themer
%defattr(-,root,root)
%{_prefix}/bin/sawfish-themer
%{_prefix}/bin/sawmill-themer
%{_prefix}/share/sawfish/%{version}/themer.glade

%changelog
* Mon Apr 24 2000 John Harper <john@dcs.warwick.ac.uk>
- s/sawmill/sawfish/

* Fri Sep 17 1999 John Harper <john@dcs.warwick.ac.uk>
- don't patch the Makefile

* Tue Sep 14 1999 Aron Griffis <agriffis@bigfoot.com>
- 0.6 spec file update: added buildroot
